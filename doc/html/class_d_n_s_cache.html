<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>DNS Cache: DNSCache Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">DNS Cache
   &#160;<span id="projectnumber">0.1</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('class_d_n_s_cache.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a> &#124;
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pub-static-methods">Static Public Member Functions</a> &#124;
<a href="#pub-attribs">Public Attributes</a> &#124;
<a href="#pro-methods">Protected Member Functions</a> &#124;
<a href="#pro-attribs">Protected Attributes</a> &#124;
<a href="class_d_n_s_cache-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">DNSCache Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p><code>#include &lt;<a class="el" href="_d_n_s_cache_8h_source.html">DNSCache.h</a>&gt;</code></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Classes</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="struct_d_n_s_cache_1_1_record.html">Record</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:aae3ddfa8f9159f3e61131193c3e33671"><td class="memItemLeft" align="right" valign="top">virtual&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_d_n_s_cache.html#aae3ddfa8f9159f3e61131193c3e33671">~DNSCache</a> ()</td></tr>
<tr class="memdesc:aae3ddfa8f9159f3e61131193c3e33671"><td class="mdescLeft">&#160;</td><td class="mdescRight">CLass destructor.  <a href="#aae3ddfa8f9159f3e61131193c3e33671">More...</a><br /></td></tr>
<tr class="separator:aae3ddfa8f9159f3e61131193c3e33671"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a028349b3ae56134069da96affd40f23b"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_d_n_s_cache.html#a028349b3ae56134069da96affd40f23b">update</a> (const std::string &amp;name, const std::string &amp;ip)  throw (dns::Exception)</td></tr>
<tr class="memdesc:a028349b3ae56134069da96affd40f23b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Either updates an existing record or adds a new one. WIll use add.  <a href="#a028349b3ae56134069da96affd40f23b">More...</a><br /></td></tr>
<tr class="separator:a028349b3ae56134069da96affd40f23b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7f9db81a497d07ad9157ce6ccbcf3c99"><td class="memItemLeft" align="right" valign="top">std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_d_n_s_cache.html#a7f9db81a497d07ad9157ce6ccbcf3c99">resolve</a> (const std::string &amp;name)  throw (dns::Exception)</td></tr>
<tr class="memdesc:a7f9db81a497d07ad9157ce6ccbcf3c99"><td class="mdescLeft">&#160;</td><td class="mdescRight">Gets the IP address for the given name grom the cache.  <a href="#a7f9db81a497d07ad9157ce6ccbcf3c99">More...</a><br /></td></tr>
<tr class="separator:a7f9db81a497d07ad9157ce6ccbcf3c99"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-static-methods"></a>
Static Public Member Functions</h2></td></tr>
<tr class="memitem:adf96681ee9ba69a9ebb3ca700cc94bbe"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="class_d_n_s_cache.html">DNSCache</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_d_n_s_cache.html#adf96681ee9ba69a9ebb3ca700cc94bbe">get_instance</a> (size_t max_size)</td></tr>
<tr class="memdesc:adf96681ee9ba69a9ebb3ca700cc94bbe"><td class="mdescLeft">&#160;</td><td class="mdescRight">Static access method to provide a singleton.  <a href="#adf96681ee9ba69a9ebb3ca700cc94bbe">More...</a><br /></td></tr>
<tr class="separator:adf96681ee9ba69a9ebb3ca700cc94bbe"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-attribs"></a>
Public Attributes</h2></td></tr>
<tr class="memitem:ac381da3c0e11c81e23fe8401b98194dd"><td class="memItemLeft" align="right" valign="top">size_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_d_n_s_cache.html#ac381da3c0e11c81e23fe8401b98194dd">m_max_size</a></td></tr>
<tr class="memdesc:ac381da3c0e11c81e23fe8401b98194dd"><td class="mdescLeft">&#160;</td><td class="mdescRight">CLass destructor.  <a href="#ac381da3c0e11c81e23fe8401b98194dd">More...</a><br /></td></tr>
<tr class="separator:ac381da3c0e11c81e23fe8401b98194dd"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pro-methods"></a>
Protected Member Functions</h2></td></tr>
<tr class="memitem:a6deb31941b4a736c137a87bc9644b116"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_d_n_s_cache.html#a6deb31941b4a736c137a87bc9644b116">delete_list</a> ()</td></tr>
<tr class="separator:a6deb31941b4a736c137a87bc9644b116"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6043db03c85543198511c5acb3e28949"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_d_n_s_cache.html#a6043db03c85543198511c5acb3e28949">get_record_index</a> (const std::string &amp;text)</td></tr>
<tr class="memdesc:a6043db03c85543198511c5acb3e28949"><td class="mdescLeft">&#160;</td><td class="mdescRight">Finds an index of a record based on given text.  <a href="#a6043db03c85543198511c5acb3e28949">More...</a><br /></td></tr>
<tr class="separator:a6043db03c85543198511c5acb3e28949"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ace0530df66d66e144921256a6cb84307"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_d_n_s_cache.html#ace0530df66d66e144921256a6cb84307">add</a> (const std::string &amp;name, const std::string &amp;ip)  throw (dns::Exception)</td></tr>
<tr class="memdesc:ace0530df66d66e144921256a6cb84307"><td class="mdescLeft">&#160;</td><td class="mdescRight">Adds a new element into the vector container. If max_size limit is exceeded, the oldest unused record is removed.  <a href="#ace0530df66d66e144921256a6cb84307">More...</a><br /></td></tr>
<tr class="separator:ace0530df66d66e144921256a6cb84307"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a24900ed4c5350e4fe87e0a5a4564cfd0"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_d_n_s_cache.html#a24900ed4c5350e4fe87e0a5a4564cfd0">modify</a> (const std::string &amp;name, const std::string &amp;ip)  throw (dns::Exception)</td></tr>
<tr class="memdesc:a24900ed4c5350e4fe87e0a5a4564cfd0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Modifies either name or ip of the record.  <a href="#a24900ed4c5350e4fe87e0a5a4564cfd0">More...</a><br /></td></tr>
<tr class="separator:a24900ed4c5350e4fe87e0a5a4564cfd0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a82dc3546189090c4ce0813d9a7334a90"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_d_n_s_cache.html#a82dc3546189090c4ce0813d9a7334a90">sort</a> ()</td></tr>
<tr class="memdesc:a82dc3546189090c4ce0813d9a7334a90"><td class="mdescLeft">&#160;</td><td class="mdescRight">Find record with lowest update rank using lambda function and move the record at the end of the collection so that the oldest record can be popped out when exceeding the max_limit.  <a href="#a82dc3546189090c4ce0813d9a7334a90">More...</a><br /></td></tr>
<tr class="separator:a82dc3546189090c4ce0813d9a7334a90"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af6926143416eb39485ed0ed8b0385ddd"><td class="memItemLeft" align="right" valign="top">std::chrono::system_clock::time_point&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_d_n_s_cache.html#af6926143416eb39485ed0ed8b0385ddd">set_time_stamp</a> ()</td></tr>
<tr class="memdesc:af6926143416eb39485ed0ed8b0385ddd"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sets current time into timestamp of a record.  <a href="#af6926143416eb39485ed0ed8b0385ddd">More...</a><br /></td></tr>
<tr class="separator:af6926143416eb39485ed0ed8b0385ddd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a35e76aa25302c8404e4de200b9fc9c7e"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_d_n_s_cache.html#a35e76aa25302c8404e4de200b9fc9c7e">is_valid_ip</a> (const std::string &amp;ip)</td></tr>
<tr class="memdesc:a35e76aa25302c8404e4de200b9fc9c7e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Simple "plain-c" style ip validation. It might be better to use boost ip::address library with "is_v4" and "is_v6" instead.  <a href="#a35e76aa25302c8404e4de200b9fc9c7e">More...</a><br /></td></tr>
<tr class="separator:a35e76aa25302c8404e4de200b9fc9c7e"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pro-attribs"></a>
Protected Attributes</h2></td></tr>
<tr class="memitem:a779bcda98c48906bcbea9a9e5f65d9c3"><td class="memItemLeft" align="right" valign="top">std::vector&lt; <a class="el" href="struct_d_n_s_cache_1_1_record.html">Record</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_d_n_s_cache.html#a779bcda98c48906bcbea9a9e5f65d9c3">m_records</a></td></tr>
<tr class="memdesc:a779bcda98c48906bcbea9a9e5f65d9c3"><td class="mdescLeft">&#160;</td><td class="mdescRight">List of records.  <a href="#a779bcda98c48906bcbea9a9e5f65d9c3">More...</a><br /></td></tr>
<tr class="separator:a779bcda98c48906bcbea9a9e5f65d9c3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a28d93c0d9dec9e5840436caaa2fc23fe"><td class="memItemLeft" align="right" valign="top">std::mutex&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_d_n_s_cache.html#a28d93c0d9dec9e5840436caaa2fc23fe">m_mutex</a></td></tr>
<tr class="memdesc:a28d93c0d9dec9e5840436caaa2fc23fe"><td class="mdescLeft">&#160;</td><td class="mdescRight">mutex  <a href="#a28d93c0d9dec9e5840436caaa2fc23fe">More...</a><br /></td></tr>
<tr class="separator:a28d93c0d9dec9e5840436caaa2fc23fe"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="aae3ddfa8f9159f3e61131193c3e33671"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aae3ddfa8f9159f3e61131193c3e33671">&#9670;&nbsp;</a></span>~DNSCache()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual DNSCache::~DNSCache </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>CLass destructor. </p>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="ace0530df66d66e144921256a6cb84307"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ace0530df66d66e144921256a6cb84307">&#9670;&nbsp;</a></span>add()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void DNSCache::add </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>ip</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
        <tr>
          <td align="right">throw </td><td>(</td><td colspan="2"><a class="el" href="classdns_1_1_exception.html">dns::Exception</a></td>
        </tr>
        <tr>
          <td align="right"></td><td>)</td><td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Adds a new element into the vector container. If max_size limit is exceeded, the oldest unused record is removed. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">name</td><td></td></tr>
    <tr><td class="paramname">ip</td><td></td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a6deb31941b4a736c137a87bc9644b116"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6deb31941b4a736c137a87bc9644b116">&#9670;&nbsp;</a></span>delete_list()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void DNSCache::delete_list </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Deletes all records from the list. Used in destructor </p>

</div>
</div>
<a id="adf96681ee9ba69a9ebb3ca700cc94bbe"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adf96681ee9ba69a9ebb3ca700cc94bbe">&#9670;&nbsp;</a></span>get_instance()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_d_n_s_cache.html">DNSCache</a> * DNSCache::get_instance </td>
          <td>(</td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>max_size</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Static access method to provide a singleton. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">max_size</td><td>Maximum size of cache records. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>pointer to one and ony instance of this class </dd></dl>

</div>
</div>
<a id="a6043db03c85543198511c5acb3e28949"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6043db03c85543198511c5acb3e28949">&#9670;&nbsp;</a></span>get_record_index()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int DNSCache::get_record_index </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>text</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Finds an index of a record based on given text. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">text</td><td>(ip or name) </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>index of record if found, -1 otherwise </dd></dl>

</div>
</div>
<a id="a35e76aa25302c8404e4de200b9fc9c7e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a35e76aa25302c8404e4de200b9fc9c7e">&#9670;&nbsp;</a></span>is_valid_ip()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool DNSCache::is_valid_ip </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>ip</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Simple "plain-c" style ip validation. It might be better to use boost ip::address library with "is_v4" and "is_v6" instead. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">ip</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>true if ip is in a valid format </dd></dl>

</div>
</div>
<a id="a24900ed4c5350e4fe87e0a5a4564cfd0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a24900ed4c5350e4fe87e0a5a4564cfd0">&#9670;&nbsp;</a></span>modify()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int DNSCache::modify </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>ip</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
        <tr>
          <td align="right">throw </td><td>(</td><td colspan="2"><a class="el" href="classdns_1_1_exception.html">dns::Exception</a></td>
        </tr>
        <tr>
          <td align="right"></td><td>)</td><td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Modifies either name or ip of the record. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">name</td><td></td></tr>
    <tr><td class="paramname">ip</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>index of record or -1 if record not found </dd></dl>
<p>Using a mutex wrapper std::lock_guard: When lock goes out of scope, its destructor unlocks the underlying mutex m_mutex</p>

</div>
</div>
<a id="a7f9db81a497d07ad9157ce6ccbcf3c99"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7f9db81a497d07ad9157ce6ccbcf3c99">&#9670;&nbsp;</a></span>resolve()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::string DNSCache::resolve </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>name</em></td><td>)</td>
          <td></td>
        </tr>
        <tr>
          <td align="right">throw </td><td>(</td><td colspan="2"><a class="el" href="classdns_1_1_exception.html">dns::Exception</a></td>
        </tr>
        <tr>
          <td align="right"></td><td>)</td><td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Gets the IP address for the given name grom the cache. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">name</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>IP or empty string </dd></dl>

</div>
</div>
<a id="af6926143416eb39485ed0ed8b0385ddd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af6926143416eb39485ed0ed8b0385ddd">&#9670;&nbsp;</a></span>set_time_stamp()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::chrono::system_clock::time_point DNSCache::set_time_stamp </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Sets current time into timestamp of a record. </p>
<dl class="section return"><dt>Returns</dt><dd>current system timestamp </dd></dl>

</div>
</div>
<a id="a82dc3546189090c4ce0813d9a7334a90"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a82dc3546189090c4ce0813d9a7334a90">&#9670;&nbsp;</a></span>sort()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void DNSCache::sort </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Find record with lowest update rank using lambda function and move the record at the end of the collection so that the oldest record can be popped out when exceeding the max_limit. </p>
<p>Perhaps it would be faster not to sort but just adding updated/resolved record at the beginning of the vector so that the oldest ones remain at the end. But, it would require additional erase and insert operation. </p>

</div>
</div>
<a id="a028349b3ae56134069da96affd40f23b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a028349b3ae56134069da96affd40f23b">&#9670;&nbsp;</a></span>update()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void DNSCache::update </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>ip</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
        <tr>
          <td align="right">throw </td><td>(</td><td colspan="2"><a class="el" href="classdns_1_1_exception.html">dns::Exception</a></td>
        </tr>
        <tr>
          <td align="right"></td><td>)</td><td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Either updates an existing record or adds a new one. WIll use add. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">name</td><td></td></tr>
    <tr><td class="paramname">ip</td><td></td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<h2 class="groupheader">Member Data Documentation</h2>
<a id="ac381da3c0e11c81e23fe8401b98194dd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac381da3c0e11c81e23fe8401b98194dd">&#9670;&nbsp;</a></span>m_max_size</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">size_t DNSCache::m_max_size</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>CLass destructor. </p>

</div>
</div>
<a id="a28d93c0d9dec9e5840436caaa2fc23fe"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a28d93c0d9dec9e5840436caaa2fc23fe">&#9670;&nbsp;</a></span>m_mutex</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::mutex DNSCache::m_mutex</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>mutex </p>

</div>
</div>
<a id="a779bcda98c48906bcbea9a9e5f65d9c3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a779bcda98c48906bcbea9a9e5f65d9c3">&#9670;&nbsp;</a></span>m_records</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt;<a class="el" href="struct_d_n_s_cache_1_1_record.html">Record</a>&gt; DNSCache::m_records</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>List of records. </p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>dns-cache/include/<a class="el" href="_d_n_s_cache_8h_source.html">DNSCache.h</a></li>
<li>dns-cache/src/<a class="el" href="_d_n_s_cache_8cpp.html">DNSCache.cpp</a></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="class_d_n_s_cache.html">DNSCache</a></li>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.13 </li>
  </ul>
</div>
</body>
</html>
